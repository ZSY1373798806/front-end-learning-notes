### git

#### 修改远程仓库地址

- 修改命令

  ```bash
  git remote origin set-url [url]
  ```

- 先删后加

  ```bash
  git remote rm origin
  git remote add origin [url]
  ```

#### git rebase & git merge

### **核心区别表**

| **维度**                                                     | `git merge`                                                  | `git rebase`                                                 |
| :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| **历史记录**                                                 | 非破坏性，保留分叉                                           | 重写历史，线性化                                             |
| **合并提交**                                                 | 一定生成                                                     | 通过快进合并可避免                                           |
| **协作安全性**                                               | 安全（推荐公共分支）                                         | 危险（仅限私有分支）                                         |
| **适用阶段**                                                 | 分支集成阶段                                                 | 分支开发中同步上游                                           |
| **主要优势**                                                 | 简单安全，保留上下文                                         | 历史整洁，便于代码审查                                       |
| ![image-20250815073816445](C:\Users\ZSY\AppData\Roaming\Typora\typora-user-images\image-20250815073816445.png) | ![image-20250815073837048](C:\Users\ZSY\AppData\Roaming\Typora\typora-user-images\image-20250815073837048.png) | ![image-20250815073857431](C:\Users\ZSY\AppData\Roaming\Typora\typora-user-images\image-20250815073857431.png) |

> **最佳实践**：
>
> - 开发中：用 `rebase` 保持分支与 `main` 同步
> - 发布时：用 `merge --no-ff` 合并到主分支
> - 团队约定：公共分支禁止 `rebase`，特性分支按需使用

#### git reset & git revert

### ⚖️ **一、核心区别对比表**

| **特性**                                                     | `git reset`                                                  | `git revert`                                                 |
| :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| **操作对象**                                                 | 移动 **HEAD 指针和分支引用**                                 | 创建 **新的逆操作提交**                                      |
| **历史修改**                                                 | **重写历史**（改变提交记录）                                 | **添加新历史**（保留原始提交）                               |
| **适用场景**                                                 | 本地未推送的提交                                             | 已推送的公共提交                                             |
| **安全性**                                                   | 高风险（破坏性操作）                                         | 安全（不修改原始历史）                                       |
| **协作影响**                                                 | 禁止在公共分支使用                                           | 可安全推送到远程                                             |
| **文件状态**                                                 | 可选择保留/丢弃工作区修改                                    | 不影响工作区文件                                             |
| **冲突发生场景**                                             | 无冲突（直接移动指针）（无需解决）                           | 可能产生冲突（git revert --continue）                        |
|                                                              | # 回退到 C2（丢弃 C3 的修改） <br />git reset --hard HEAD~1  | # 创建逆操作提交（撤销 C3 的修改）<br /> git revert HEAD  # 撤销 C3 |
| ![image-20250815073917145](C:\Users\ZSY\AppData\Roaming\Typora\typora-user-images\image-20250815073917145.png) | ![image-20250815073929578](C:\Users\ZSY\AppData\Roaming\Typora\typora-user-images\image-20250815073929578.png) | ![image-20250815073942180](C:\Users\ZSY\AppData\Roaming\Typora\typora-user-images\image-20250815073942180.png) |

![image-20250815074238181](C:\Users\ZSY\AppData\Roaming\Typora\typora-user-images\image-20250815074238181.png)

- ### **git reset**

  - --soft：仅移动指针
  - --mixed（默认）：重置暂存区
  - --hard：彻底重置  

| **操作/状态**     | `--soft`             | `--mixed` (默认)    | `--hard`       |
| :---------------- | :------------------- | :------------------ | :------------- |
| **HEAD 指针移动** | ✅                    | ✅                   | ✅              |
| **暂存区重置**    | ❌                    | ✅                   | ✅              |
| **工作区重置**    | ❌                    | ❌                   | ✅              |
| **未跟踪文件**    | 保留                 | 保留                | 保留           |
| **已提交修改**    | 保留在暂存区         | 保留在工作区        | **永久丢弃**   |
| **安全级别**      | 安全                 | 较安全              | **危险**       |
| **常用命令示例**  | `reset --soft HEAD~` | `reset HEAD <file>` | `reset --hard` |